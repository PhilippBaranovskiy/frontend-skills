!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.qwest=e()}}(function(){var e;return function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var p=new Error("Cannot find module '"+s+"'");throw p.code="MODULE_NOT_FOUND",p}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,n,r){!function(t){"use strict";var r=function(e){var t=function(e,t,n){n="function"==typeof n?n():null===n?"":void 0===n?"":n,e[e.length]=encodeURIComponent(t)+"="+encodeURIComponent(n)},n=function(e,r,o){var i,s,a;if("[object Array]"===Object.prototype.toString.call(r))for(i=0,s=r.length;s>i;i++)n(e+"["+("object"==typeof r[i]?i:"")+"]",r[i],o);else if(r&&"[object Object]"===r.toString())for(a in r)r.hasOwnProperty(a)&&(e?n(e+"["+a+"]",r[a],o,t):n(a,r[a],o,t));else if(e)t(o,e,r);else for(a in r)t(o,a,r[a]);return o};return n("",e,[]).join("&").replace(/%20/g,"+")};"object"==typeof n&&"object"==typeof n.exports?n.exports=r:"function"==typeof e&&e.amd?e([],function(){return r}):t.param=r}(this)},{}],2:[function(e,t,n){!function(e){function t(e){return"function"==typeof e}function n(e){return"object"==typeof e}function r(e){"undefined"!=typeof setImmediate?setImmediate(e):"undefined"!=typeof process&&process.nextTick?process.nextTick(e):setTimeout(e,0)}var o;e[0][e[1]]=function e(i){var s,a=[],u=[],p=function(e,t){return null==s&&null!=e&&(s=e,a=t,u.length&&r(function(){for(var e=0;e<u.length;e++)u[e]()})),s};return p.then=function(p,c){var f=e(i),l=function(){function e(r){var i,s=0;try{if(r&&(n(r)||t(r))&&t(i=r.then)){if(r===f)throw new TypeError;i.call(r,function(){s++||e.apply(o,arguments)},function(e){s++||f(!1,[e])})}else f(!0,arguments)}catch(e){s++||f(!1,[e])}}try{var r=s?p:c;t(r)?e(r.apply(o,a||[])):f(s,a)}catch(e){f(!1,[e])}};return null!=s?r(l):u.push(l),f},i&&(p=i(p)),p}}("undefined"==typeof t?[window,"pinkySwear"]:[t,"exports"])},{}],qwest:[function(e,t,n){t.exports=function(){var t="undefined"!=typeof window?window:self,n=e("pinkyswear"),r=e("jquery-param"),o={},i="json",s="post",a=null,u=0,p=[],c=t.XMLHttpRequest?function(){return new t.XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")},f=""===c().responseType,l=function(e,l,d,h,y){e=e.toUpperCase(),d=d||null,h=h||{};for(var m in o)if(!(m in h))if("object"==typeof o[m]&&"object"==typeof h[m])for(var T in o[m])h[m][T]=o[m][T];else h[m]=o[m];var w,g,v,b,x,q=!1,j=!1,C=!1,E=0,O={},S={text:"*/*",xml:"text/xml",json:"application/json",post:"application/x-www-form-urlencoded",document:"text/html"},D={text:"*/*",xml:"application/xml; q=1.0, text/xml; q=0.8, */*; q=0.1",json:"application/json; q=1.0, text/*; q=0.8, */*; q=0.1"},M=!1,L=n(function(n){return n.abort=function(){C||(g&&4!=g.readyState&&g.abort(),M&&(--u,M=!1),C=!0)},n.send=function(){if(!M){if(u==a)return void p.push(n);if(C)return void(p.length&&p.shift().send());if(++u,M=!0,g=c(),w&&("withCredentials"in g||!t.XDomainRequest||(g=new XDomainRequest,j=!0,"GET"!=e&&"POST"!=e&&(e="POST"))),j?g.open(e,l):(g.open(e,l,h.async,h.user,h.password),f&&h.async&&(g.withCredentials=h.withCredentials)),!j)for(var r in O)O[r]&&g.setRequestHeader(r,O[r]);if(f&&"auto"!=h.responseType)try{g.responseType=h.responseType,q=g.responseType==h.responseType}catch(e){}f||j?(g.onload=P,g.onerror=R,j&&(g.onprogress=function(){})):g.onreadystatechange=function(){4==g.readyState&&P()},h.async?"timeout"in g?(g.timeout=h.timeout,g.ontimeout=X):v=setTimeout(X,h.timeout):j&&(g.ontimeout=function(){}),"auto"!=h.responseType&&"overrideMimeType"in g&&g.overrideMimeType(S[h.responseType]),y&&y(g),j?setTimeout(function(){g.send("GET"!=e?d:null)},0):g.send("GET"!=e?d:null)}},n}),P=function(){var e;if(M=!1,clearTimeout(v),p.length&&p.shift().send(),!C){--u;try{if(q){if("response"in g&&null===g.response)throw"The request response is empty";x=g.response}else{if(e=h.responseType,"auto"==e)if(j)e=i;else{var n=g.getResponseHeader("Content-Type")||"";e=n.indexOf(S.json)>-1?"json":n.indexOf(S.xml)>-1?"xml":"text"}switch(e){case"json":if(g.responseText.length)try{x="JSON"in t?JSON.parse(g.responseText):new Function("return ("+g.responseText+")")()}catch(e){throw"Error while parsing JSON body : "+e}break;case"xml":try{t.DOMParser?x=(new DOMParser).parseFromString(g.responseText,"text/xml"):(x=new ActiveXObject("Microsoft.XMLDOM"),x.async="false",x.loadXML(g.responseText))}catch(e){x=void 0}if(!x||!x.documentElement||x.getElementsByTagName("parsererror").length)throw"Invalid XML";break;default:x=g.responseText}}if("status"in g&&!/^2|1223/.test(g.status))throw g.status+" ("+g.statusText+")";L(!0,[g,x])}catch(e){L(!1,[e,g,x])}}},R=function(e){C||(e="string"==typeof e?e:"Connection aborted",L.abort(),L(!1,[new Error(e),g,null]))},X=function(){C||(h.attempts&&++E==h.attempts?R("Timeout ("+l+")"):(g.abort(),M=!1,L.send()))};if(h.async=!("async"in h&&!h.async),h.cache="cache"in h&&!!h.cache,h.dataType="dataType"in h?h.dataType.toLowerCase():s,h.responseType="responseType"in h?h.responseType.toLowerCase():"auto",h.user=h.user||"",h.password=h.password||"",h.withCredentials=!!h.withCredentials,h.timeout="timeout"in h?parseInt(h.timeout,10):3e4,h.attempts="attempts"in h?parseInt(h.attempts,10):1,b=l.match(/\/\/(.+?)\//),w=b&&!!b[1]&&b[1]!=location.host,"ArrayBuffer"in t&&d instanceof ArrayBuffer?h.dataType="arraybuffer":"Blob"in t&&d instanceof Blob?h.dataType="blob":"Document"in t&&d instanceof Document?h.dataType="document":"FormData"in t&&d instanceof FormData&&(h.dataType="formdata"),null!==d)switch(h.dataType){case"json":d=JSON.stringify(d);break;case"post":d=r(d)}if(h.headers){var U=function(e,t,n){return t+n.toUpperCase()};for(b in h.headers)O[b.replace(/(^|-)([^-])/g,U)]=h.headers[b]}return"Content-Type"in O||"GET"==e||h.dataType in S&&S[h.dataType]&&(O["Content-Type"]=S[h.dataType]),O.Accept||(O.Accept=h.responseType in D?D[h.responseType]:"*/*"),w||"X-Requested-With"in O||(O["X-Requested-With"]="XMLHttpRequest"),h.cache||"Cache-Control"in O||(O["Cache-Control"]="no-cache"),"GET"==e&&d&&"string"==typeof d&&(l+=(/\?/.test(l)?"&":"?")+d),h.async&&L.send(),L},d=function(e){var t=[],r=0,o=[];return n(function(n){var i=-1,s=function(e){return function(s,a,u,p){var c=++i;return++r,t.push(l(e,n.base+s,a,u,p).then(function(e,t){o[c]=arguments,--r||n(!0,1==o.length?o[0]:[o])},function(){n(!1,arguments)})),n}};n.get=s("GET"),n.post=s("POST"),n.put=s("PUT"),n.delete=s("DELETE"),n.catch=function(e){return n.then(null,e)},n.complete=function(e){var t=function(){e()};return n.then(t,t)},n.map=function(e,t,n,r,o){return s(e.toUpperCase()).call(this,t,n,r,o)};for(var a in e)a in n||(n[a]=e[a]);return n.send=function(){for(var e=0,r=t.length;r>e;++e)t[e].send();return n},n.abort=function(){for(var e=0,r=t.length;r>e;++e)t[e].abort();return n},n})},h={base:"",get:function(){return d(h).get.apply(this,arguments)},post:function(){return d(h).post.apply(this,arguments)},put:function(){return d(h).put.apply(this,arguments)},delete:function(){return d(h).delete.apply(this,arguments)},map:function(){return d(h).map.apply(this,arguments)},xhr2:f,limit:function(e){return a=e,h},setDefaultOptions:function(e){return o=e,h},setDefaultXdrResponseType:function(e){return i=e.toLowerCase(),h},setDefaultDataType:function(e){return s=e.toLowerCase(),h},getOpenRequests:function(){return u}};return h}()},{"jquery-param":1,pinkyswear:2}]},{},[1,2])("qwest")});var googlePageSpeedScores=function(e,t){"use strict";if(e=e||[],e.length)return this.apiUrl="https://www.googleapis.com/pagespeedonline/v2/runPagespeed",this.results=[],this.fetchPromises=[],this.averageScore=function(e){var t=0,n=0;return e.forEach(function(e){t+=e.speed,n+=e.usability}),t=Math.round(t/e.length),n=Math.round(n/e.length),{speed:t,usability:n}},this.storeResult=function(e,t){var n=t.ruleGroups.SPEED,r=t.ruleGroups.USABILITY;this.results.push({speed:n.score,usability:r.score})},this.logError=function(e,t,n){console.log("logError: ",arguments)},e.forEach(function(e){var t=qwest.get(this.apiUrl,{url:e,strategy:"mobile"}).then(this.storeResult.bind(this)).catch(this.logError);this.fetchPromises.push(t),t=null}.bind(this)),Promise.all(this.fetchPromises).then(function(){t(this.averageScore(this.results))}.bind(this)).catch(function(){console.log("ALL error: ",arguments)})};
var _raf=window.requestAnimationFrame||window.setImmediate||function(s){setTimeout(s,0)},APP=function(s){return s.links=s.links||{},s.links.getLinks=function(s){try{return""!=s.value&&s.value.replace(/\r\n/g,"\n").split("\n")}catch(s){return!1}},s.links.displayScores=function(s){var e=Math.round((s.speed+s.usability)/2/10);APP.links.scoresHolder?APP.links.scoresHolder.innerHTML=e:alert("The person's scores are "+e+"/10");var n="neitral";e>6?n="good":e<5&&(n="bad"),_raf(function(){APP.links.scoresHolder.classList.remove("neitral","bad","good"),APP.links.scoresHolder.classList.add(n),APP.links.scores.classList.add("display")})},s.links.fetchAll=function(s){var e=s.querySelector("textarea"),n=this.getLinks(e);new googlePageSpeedScores(n,function(s){APP.links.displayScores(s),_raf(function(){APP.links.form.classList.remove("loading")})})},s.links.submitInit=function(s){s.addEventListener("submit",function(s){s.preventDefault(),APP.links.fetchAll(this),_raf(function(){APP.links.form.classList.add("loading"),APP.links.scores.classList.remove("display")})},!1)},s.links.form=document.querySelector("#links"),s.links.form?(s.links.scores=document.querySelector(".results_scores"),s.links.scoresHolder=document.querySelector("#scores"),s.links.submitInit(s.links.form),s):void console.error("No form is here")}(APP||{});